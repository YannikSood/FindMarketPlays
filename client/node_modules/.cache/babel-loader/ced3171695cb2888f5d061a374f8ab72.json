{"ast":null,"code":"import _slicedToArray from\"/Users/yanniksood/Desktop/FindMarketPlays.com/FindMarketPlays/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,Fragment}from'react';import{useParams,useHistory}from\"react-router-dom\";import{Row,Col,Container,Button}from\"react-bootstrap\";import ScrollingWidget from'../Widgets/ScrollingWidget';import firebase from'../../firebase/firebase';import Loader from'../Loader';import{receiveNote}from'../../actions/notes';import{useDispatch}from'react-redux';import{connect}from\"react-redux\";var NoteDetail=function NoteDetail(_ref){var currentUser=_ref.currentUser,addNote=_ref.addNote;// Hooks\nvar dispatch=useDispatch();var history=useHistory();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),note=_useState4[0],setNote=_useState4[1];var slug=useParams();useEffect(function(){firebase.database().ref(\"/user-notes/\".concat(currentUser.id,\"/\").concat(slug.id)).once(\"value\").then(function(snapshot){setNote(snapshot===null||snapshot===void 0?void 0:snapshot.val());dispatch(receiveNote(snapshot===null||snapshot===void 0?void 0:snapshot.val()));setIsLoading(false);}).catch(function(err){console.log(\"error fetching note: \",err);setIsLoading(false);});},[slug.id]);// Handlers\nvar updates={};updates[\"/notes/\".concat(note.id)]=note;updates[\"/user-notes/\".concat(currentUser.id,\"/\").concat(note.id)]=note;function component(){return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,{className:\"mb-3\"},/*#__PURE__*/React.createElement(Col,{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"d-inline-block\"},note.title),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{className:\"mt-1 ml-3\",variant:\"primary\",onClick:function onClick(){history.push(\"/note/edit/\".concat(slug.id));}},\"Edit\"),/*#__PURE__*/React.createElement(Button,{className:\"mt-1 ml-3\",variant:\"danger\",onClick:function onClick(){firebase.database().ref(\"/user-notes/\".concat(currentUser.id,\"/\").concat(note.id)).remove().then(function(){return history.push(\"/notes\");}).catch(function(err){return\"Cannot delete\";});}},\"Delete\"),/*#__PURE__*/React.createElement(Button,{className:\"mt-1 ml-3\",variant:\"secondary\",onClick:function onClick(){history.push(\"/notes\");}},\"Back\")))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{dangerouslySetInnerHTML:{__html:note.body}}))));}return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(ScrollingWidget,null),isLoading?/*#__PURE__*/React.createElement(Loader,null):component());};var mapStateToProps=function mapStateToProps(state){var auth=state.auth;return{currentUser:auth.currentUser,isAuthed:auth.isAuthed};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{addNote:function addNote(note){return dispatch(receiveNote(note));}};};export default connect(mapStateToProps,mapDispatchToProps)(NoteDetail);","map":{"version":3,"sources":["/Users/yanniksood/Desktop/FindMarketPlays.com/FindMarketPlays/client/src/components/Notes/NoteDetail.js"],"names":["React","useEffect","useState","Fragment","useParams","useHistory","Row","Col","Container","Button","ScrollingWidget","firebase","Loader","receiveNote","useDispatch","connect","NoteDetail","currentUser","addNote","dispatch","history","isLoading","setIsLoading","note","setNote","slug","database","ref","id","once","then","snapshot","val","catch","err","console","log","updates","component","title","push","remove","__html","body","mapStateToProps","state","auth","isAuthed","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, Fragment } from 'react';\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { Row, Col, Container, Button } from \"react-bootstrap\";\nimport ScrollingWidget from '../Widgets/ScrollingWidget';\nimport firebase from '../../firebase/firebase';\nimport Loader from '../Loader';\nimport { receiveNote } from '../../actions/notes';\nimport { useDispatch } from 'react-redux';\nimport { connect } from \"react-redux\";\n\nconst NoteDetail = ({currentUser, addNote }) => {\n  // Hooks\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState(true);\n  const [note, setNote] = useState([]);\n  const slug = useParams();\n  useEffect(() => {\n    firebase\n      .database()\n      .ref(`/user-notes/${currentUser.id}/${slug.id}`)\n      .once(\"value\")\n      .then((snapshot) => {\n        setNote(snapshot?.val());\n        dispatch(receiveNote(snapshot?.val()));\n        setIsLoading(false);\n      })\n      .catch((err) => {\n        console.log(\"error fetching note: \", err);\n        setIsLoading(false);\n      });\n  }, [slug.id]);\n  // Handlers\n\n  let updates = {};\n  updates[`/notes/${note.id}`] = note;\n  updates[`/user-notes/${currentUser.id}/${note.id}`] = note;\n\n  function component() {\n    return (\n      <Container>\n        <Row className=\"mb-3\">\n          <Col className=\"d-flex justify-content-between\">\n            <h1 className=\"d-inline-block\">{note.title}</h1>\n            <div>\n              <Button\n                className=\"mt-1 ml-3\"\n                variant=\"primary\"\n                onClick={() => {\n                  history.push(`/note/edit/${slug.id}`);\n                }}\n              >\n                Edit\n              </Button>\n              <Button\n                className=\"mt-1 ml-3\"\n                variant=\"danger\"\n                onClick={() => {\n                  firebase\n                    .database()\n                    .ref(`/user-notes/${currentUser.id}/${note.id}`)\n                    .remove()\n                    .then(() => history.push(`/notes`))\n                    .catch((err) => \"Cannot delete\");\n                }}\n              >\n                Delete\n              </Button>\n              <Button\n                className=\"mt-1 ml-3\"\n                variant=\"secondary\"\n                onClick={() => {\n                  history.push(`/notes`);\n                }}\n              >\n                Back\n              </Button>\n            </div>\n          </Col>\n        </Row>\n        <Row>\n          <Col>\n            <div dangerouslySetInnerHTML={{ __html: note.body }} />\n          </Col>\n        </Row>\n      </Container>\n    );\n  }\n\n  return (\n    <Fragment>\n      <ScrollingWidget />\n      {isLoading ? (\n        <Loader />\n      ) : (\n        component()\n      )}\n    </Fragment>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  const { auth } = state;\n\n  return {\n    currentUser: auth.currentUser,\n    isAuthed: auth.isAuthed,\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  addNote: (note) => dispatch(receiveNote(note))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NoteDetail);\n"]},"metadata":{},"sourceType":"module"}