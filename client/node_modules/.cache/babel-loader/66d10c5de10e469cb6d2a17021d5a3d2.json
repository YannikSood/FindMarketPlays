{"ast":null,"code":"import _slicedToArray from\"/Users/yanniksood/Desktop/FindMarketPlays.com/FindMarketPlays/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,Fragment}from'react';import{connect}from'react-redux';import{useHistory,Link}from'react-router-dom';import{Row,Col,Container,Button,Table}from'react-bootstrap';import{formattedDateDifference}from'../../helpers/DateHelper';import ScrollingWidget from'../Widgets/ScrollingWidget';import firebase from'../../firebase/firebase';import Loader from'../Loader';var Notes=function Notes(_ref){var currentUser=_ref.currentUser,isAuthed=_ref.isAuthed;// Hooks\nvar history=useHistory();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),notes=_useState4[0],setNotes=_useState4[1];useEffect(function(){if(!isAuthed){history.push(\"/login\");}else{firebase.database().ref(\"/user-notes/\".concat(currentUser.id)).once(\"value\").then(function(snapshot){setNotes(Object.values(snapshot===null||snapshot===void 0?void 0:snapshot.val())||[]);setIsLoading(false);}).catch(function(err){console.log(\"error fetching notes: \",err);setIsLoading(false);});}},[isAuthed,history,currentUser.id]);// useEffect(() => {\n//   firebase.database().ref(`/user-notes/${currentUser.id}`).once('value')\n//     .then((snapshot) => {\n//       setNotes(Object.values(snapshot?.val()) || []);\n//       setIsLoading(false);\n//     })\n//     .catch((err) => {\n//       console.log('error fetching notes: ', err);\n//       setIsLoading(false);\n//     });\n// }, [currentUser.id]);\n// Handlers\nvar renderNotes=function renderNotes(){if(notes.length===0)return/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"p\",null,\"Nothing here yet...\")));return notes.map(function(note){return/*#__PURE__*/React.createElement(\"tr\",{key:note.id},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{className:\"note-title\",to:\"/note/\".concat(note.id)},note.title)),/*#__PURE__*/React.createElement(\"td\",{style:{width:'25%'}},formattedDateDifference(note.createdAt)));});};return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(ScrollingWidget,null),/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,{className:\"mb-3\"},/*#__PURE__*/React.createElement(Col,{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"d-inline-block\"},\"Notes\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(){return history.push('/note/new');}},\"Create\")))),isLoading?/*#__PURE__*/React.createElement(Loader,null):/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true,variant:\"dark\"},/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Title\"),/*#__PURE__*/React.createElement(\"th\",{style:{width:'25%'}},\"Posted\")),renderNotes()))));};var mapStateToProps=function mapStateToProps(state){var auth=state.auth;return{currentUser:auth.currentUser,isAuthed:auth.isAuthed};};export default connect(mapStateToProps)(Notes);","map":{"version":3,"sources":["/Users/yanniksood/Desktop/FindMarketPlays.com/FindMarketPlays/client/src/components/Notes/Notes.js"],"names":["React","useEffect","useState","Fragment","connect","useHistory","Link","Row","Col","Container","Button","Table","formattedDateDifference","ScrollingWidget","firebase","Loader","Notes","currentUser","isAuthed","history","isLoading","setIsLoading","notes","setNotes","push","database","ref","id","once","then","snapshot","Object","values","val","catch","err","console","log","renderNotes","length","map","note","title","width","createdAt","mapStateToProps","state","auth"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { useHistory, Link } from 'react-router-dom';\nimport { Row, Col, Container, Button, Table } from 'react-bootstrap';\nimport { formattedDateDifference } from '../../helpers/DateHelper';\nimport ScrollingWidget from '../Widgets/ScrollingWidget';\nimport firebase from '../../firebase/firebase';\nimport Loader from '../Loader';\n\nconst Notes = ({ currentUser, isAuthed }) => {\n  // Hooks\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState(true);\n  const [notes, setNotes] = useState([]);\n\n  useEffect(() => {\n    if (!isAuthed) {\n      history.push(\"/login\");\n    } else {\n      firebase\n        .database()\n        .ref(`/user-notes/${currentUser.id}`)\n        .once(\"value\")\n        .then((snapshot) => {\n          setNotes(Object.values(snapshot?.val()) || []);\n          setIsLoading(false);\n        })\n        .catch((err) => {\n          console.log(\"error fetching notes: \", err);\n          setIsLoading(false);\n        });\n    }\n  }, [isAuthed, history, currentUser.id]);\n\n  // useEffect(() => {\n  //   firebase.database().ref(`/user-notes/${currentUser.id}`).once('value')\n  //     .then((snapshot) => {\n  //       setNotes(Object.values(snapshot?.val()) || []);\n  //       setIsLoading(false);\n  //     })\n  //     .catch((err) => {\n  //       console.log('error fetching notes: ', err);\n  //       setIsLoading(false);\n  //     });\n  // }, [currentUser.id]);\n  // Handlers\n\n  const renderNotes = () => {\n    if (notes.length === 0) return <Row><Col><p>Nothing here yet...</p></Col></Row>;\n    return notes.map(note => (\n      <tr key={note.id}>\n          <td>\n            <Link className=\"note-title\" to={`/note/${note.id}`}>{note.title}</Link>\n          </td>\n        <td style={{ width: '25%' }}>{formattedDateDifference(note.createdAt)}</td>\n      </tr>\n    ));\n  };\n\n  return (\n    <Fragment>\n      <ScrollingWidget />\n      <Container>\n        <Row className=\"mb-3\">\n          <Col className=\"d-flex justify-content-between\">\n            <h1 className=\"d-inline-block\">Notes</h1>\n            <div>\n              <Button variant=\"primary\" onClick={() => history.push('/note/new')}>Create</Button>\n            </div>\n          </Col>\n        </Row>\n        {isLoading ? (\n          <Loader />\n        ) : (\n          <Table striped bordered hover variant=\"dark\">\n            <tbody>\n              <tr>\n                <th>Title</th>\n                <th style={{ width: '25%' }}>Posted</th>\n              </tr>\n              {renderNotes()}\n            </tbody>\n          </Table>\n        )}\n      </Container>\n    </Fragment>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  const { auth } = state;\n\n  return {\n    currentUser: auth.currentUser,\n    isAuthed: auth.isAuthed,\n  };\n};\nexport default connect(mapStateToProps)(Notes);\n"]},"metadata":{},"sourceType":"module"}