{"ast":null,"code":"import _slicedToArray from\"/Users/yanniksood/Desktop/FindMarketPlays.com/FindMarketPlays/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Container from'react-bootstrap/Container';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import Button from'react-bootstrap/Button';import Form from'react-bootstrap/Form';import*as ProfileAPI from'../../util/profileAPI';import{useState,useEffect}from'react';import firebase from'firebase';import{connect}from'react-redux';import ResetErrors from'../Errors/ResetErrors';import EmailSuccess from'../Success/EmailSuccess';import PasswordSuccess from'../Success/PasswordSuccess';import{useHistory}from\"react-router-dom\";import*as ROUTES from\"../../routes/routes\";var Profile=function Profile(_ref){var currentUser=_ref.currentUser,isAuthed=_ref.isAuthed;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),emailFlag=_useState2[0],emailSwitch=_useState2[1];var _useState3=useState(currentUser.email),_useState4=_slicedToArray(_useState3,2),emailValue=_useState4[0],setEmail=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),tempEmail=_useState6[0],setTempEmail=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),resetErrors=_useState8[0],setErrors=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),emailSuccess=_useState10[0],setEmailSuccess=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),passwordSuccess=_useState12[0],setPassSuccess=_useState12[1];var history=useHistory();useEffect(function(){if(!isAuthed){history.push(ROUTES.LOGIN);}else{setEmail(firebase.auth().currentUser.email);setEmailSuccess(false);setPassSuccess(false);}},[isAuthed,history]);function resetEmail(){ProfileAPI.emailReset(tempEmail).then(function(res){setEmail(tempEmail);emailSwitch(false);setEmailSuccess(true);setErrors({});if(passwordSuccess){setPassSuccess(false);};}).catch(function(error){setErrors(error);});};function resetPassword(){ProfileAPI.passwordReset().then(function(res){setPassSuccess(true);setErrors({});if(emailSuccess){setEmailSuccess(false);}}).catch(function(error){setErrors(error);});}function handleChange(e){setTempEmail(e.currentTarget.value);}function emailComponent(){if(emailFlag){return/*#__PURE__*/React.createElement(Form,null,ResetErrors(resetErrors),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Label,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Email Address\")),/*#__PURE__*/React.createElement(Form.Control,{placeholder:emailValue,onChange:function onChange(e){return handleChange(e);}})),/*#__PURE__*/React.createElement(Button,{className:\"mt-4\",onClick:function onClick(){return resetEmail();}},\"Save\"),/*#__PURE__*/React.createElement(Button,{className:\"mt-4 ml-2\",variant:\"secondary\",onClick:function onClick(){return emailSwitch(false);}},\"Cancel\"));}else{return/*#__PURE__*/React.createElement(Container,null,EmailSuccess(emailSuccess),PasswordSuccess(passwordSuccess),ResetErrors(resetErrors),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"h2\",{className:\"border border-white rounded pl-3 pb-2 pt-2\"},\"Email\"),/*#__PURE__*/React.createElement(\"h6\",{className:\"pl-3\"},emailValue),/*#__PURE__*/React.createElement(Button,{className:\"ml-3\",onClick:function onClick(){return emailSwitch(true);}},\"Reset Email\")),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"h2\",{className:\"border border-white rounded pl-3 pt-2 pb-2\"},\"Password\"),/*#__PURE__*/React.createElement(\"h6\",{className:\"p-2\"}),/*#__PURE__*/React.createElement(Button,{className:\"ml-3 mt-1\",onClick:function onClick(){return resetPassword();}},\"Reset Password\"))));}}return/*#__PURE__*/React.createElement(\"div\",{className:\"About\"},/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{align:\"center\"},/*#__PURE__*/React.createElement(\"h1\",null,\"My Account Settings\"))),emailComponent()));};var MSTP=function MSTP(state){var auth=state.auth;return{currentUser:auth.currentUser,isAuthed:auth.isAuthed};};export default connect(MSTP)(Profile);","map":{"version":3,"sources":["/Users/yanniksood/Desktop/FindMarketPlays.com/FindMarketPlays/client/src/components/Account/Profile.js"],"names":["React","Container","Row","Col","Button","Form","ProfileAPI","useState","useEffect","firebase","connect","ResetErrors","EmailSuccess","PasswordSuccess","useHistory","ROUTES","Profile","currentUser","isAuthed","emailFlag","emailSwitch","email","emailValue","setEmail","tempEmail","setTempEmail","resetErrors","setErrors","emailSuccess","setEmailSuccess","passwordSuccess","setPassSuccess","history","push","LOGIN","auth","resetEmail","emailReset","then","res","catch","error","resetPassword","passwordReset","handleChange","e","currentTarget","value","emailComponent","MSTP","state"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport * as ProfileAPI from '../../util/profileAPI';\nimport { useState, useEffect } from 'react';\nimport firebase from 'firebase';\nimport { connect } from 'react-redux';\nimport ResetErrors from '../Errors/ResetErrors';\nimport EmailSuccess from '../Success/EmailSuccess';\nimport PasswordSuccess from '../Success/PasswordSuccess';\nimport { useHistory } from \"react-router-dom\";\nimport * as ROUTES from \"../../routes/routes\";\n\n\nconst Profile = ({ currentUser, isAuthed }) => {\n  const [emailFlag, emailSwitch] = useState(false);\n  const [emailValue, setEmail] = useState(currentUser.email);\n  const [tempEmail, setTempEmail] = useState();\n  const [resetErrors, setErrors] = useState({});\n  const [emailSuccess, setEmailSuccess] = useState(false);\n  const [passwordSuccess, setPassSuccess] = useState(false);\n  const history = useHistory();\n\n  useEffect(() => {\n    if (!isAuthed) {\n      history.push(ROUTES.LOGIN)\n    } else {\n      setEmail(firebase.auth().currentUser.email);\n      setEmailSuccess(false);\n      setPassSuccess(false);\n    }\n  }, [isAuthed, history]);\n\n  function resetEmail() {\n    ProfileAPI.emailReset(tempEmail)\n    .then((res) => {\n      setEmail(tempEmail);\n      emailSwitch(false);\n      setEmailSuccess(true);\n      setErrors({});\n      if (passwordSuccess) {\n        setPassSuccess(false);\n      };\n    })\n    .catch(error => {\n        setErrors(error);\n      })\n  };\n\n  function resetPassword() {\n    ProfileAPI.passwordReset()\n      .then((res) => {\n        setPassSuccess(true);\n        setErrors({});\n        if (emailSuccess) {\n          setEmailSuccess(false);\n        }\n      })\n      .catch((error) => {\n        setErrors(error);\n      })\n  }\n\n  function handleChange(e) {\n    setTempEmail(e.currentTarget.value)\n  }\n\n  function emailComponent() {\n    if (emailFlag) {\n      return (\n          <Form>\n            {ResetErrors(resetErrors)}\n            <Form.Group>\n              <Form.Label>\n                <h2>\n                  Email Address\n                </h2>\n              </Form.Label>\n              <Form.Control\n                placeholder={emailValue}\n                onChange={(e) => handleChange(e)}\n              >\n              </Form.Control>\n            </Form.Group>\n            <Button className=\"mt-4\" onClick={() => resetEmail()}>\n              Save\n            </Button>\n            <Button className=\"mt-4 ml-2\" variant=\"secondary\" onClick={() => emailSwitch(false)}>\n              Cancel\n            </Button>\n          </Form>\n      )\n    } else {\n      return (\n        <Container>\n          {EmailSuccess(emailSuccess)}\n          {PasswordSuccess(passwordSuccess)}\n          {ResetErrors(resetErrors)}\n          <Row >\n            <Col >\n              <h2 className=\"border border-white rounded pl-3 pb-2 pt-2\" >\n                Email\n              </h2> \n              <h6 className=\"pl-3\">\n                {emailValue}  \n              </h6>\n              <Button className=\"ml-3\" onClick={() => emailSwitch(true)}>\n                Reset Email\n              </Button>\n            </Col>\n            <Col >\n              <h2 className=\"border border-white rounded pl-3 pt-2 pb-2\" >\n                Password\n              </h2>\n              <h6 className=\"p-2\">\n              </h6>\n              <Button className=\"ml-3 mt-1\" onClick={() => resetPassword()}>\n                Reset Password\n              </Button>\n            </Col>\n          </Row>\n        </Container>\n      )\n    }\n\n  }\n\n  return (\n    <div className=\"About\">\n      <Container fluid>\n        <Row>\n          <Col align=\"center\">\n            <h1>My Account Settings</h1>\n          </Col>\n        </Row>\n\n        {emailComponent()}\n        \n      </Container>\n    </div>\n  )\n};\n\nconst MSTP = (state) => {\n  let auth = state.auth;\n\n  return {\n    currentUser: auth.currentUser,\n    isAuthed:  auth.isAuthed\n  };\n}\n\nexport default connect(MSTP)(Profile);\n\n\n"]},"metadata":{},"sourceType":"module"}